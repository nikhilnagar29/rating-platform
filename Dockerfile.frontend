# Use Node 20+ (Vite requires >=20.19)
FROM node:20

# Set working directory inside container
WORKDIR /app

# Install dependencies first (cache layer)
COPY frontend/package*.json ./
RUN npm install

# Copy rest of the frontend code
COPY frontend/ .

# Vite default dev server port
EXPOSE 5173

# Run in dev mode and bind to 0.0.0.0 so browser can access it
CMD ["sh", "-c", "npm install && npm run dev -- --host 0.0.0.0"]